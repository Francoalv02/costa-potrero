<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultar Disponibilidad - Costa Potrero</title>
    <link rel="stylesheet" href="../css/estilo.css">
</head>
<body>
 <header>
     <div class="logo">
            <h1 class="h1">Costa Potrero</h1>
            <button onclick="cerrarSesion()" class="btn-logout">Cerrar sesión</button>
        </div>
        <nav>
            <ul>
                <li> 
                    <a href="./../../index.html">Inicio</a>
                    <a href="./../reservas/disponibilidad.html">Disponibilidad</a>
                    <a href="./../reservas/index.html">Listado Reservas</a>
                    <a href="./../cabanas/alta.html">Alta Cabaña</a>
                    <a href="./../cabanas/index.html">Listado Cabañas</a>
                    <a href="./../huespedes/index.html">Listado Huespedes</a>
                    <a href="./../pagos/pagos.html">Lista de Pagos</a>
                </li>
            </ul>
           
        </nav>
 </header>

 <main>
    <section>
        <div class="disponibilidad-form-container">
            <h1 class="titulo-reservas">Consultar Disponibilidad</h1>
            <p class="subtitulo-info">Selecciona las fechas para ver las cabañas disponibles</p>
            
            <form class="disponibilidad-form-group" id="form-disponibilidad">
                <div class="disponibilidad-form-row">
                    <div class="disponibilidad-form-col">
                        <label for="fecha_inicio">Fecha de Llegada:</label>
                        <input type="date" id="fecha_inicio" required min="">
                    </div>
                    <div class="disponibilidad-form-col">
                        <label for="fecha_fin">Fecha de Salida:</label>
                        <input type="date" id="fecha_fin" required min="">
                    </div>
                </div>
                <div class="disponibilidad-form-row">
                    <div class="disponibilidad-form-col">
                        <button type="submit" class="btn-estadisticas">Consultar Disponibilidad</button>
                    </div>
                    <div class="disponibilidad-form-col">
                        <button type="button" id="btn-limpiar" class="btn-estadisticas" style="background: #6c757d;"> Limpiar</button>
                    </div>
                </div>
            </form>
            
            <div id="resultado"></div>
        </div>
    </section>
 </main>

 <script>
  function cerrarSesion() {
    fetch('/logout', { method: 'POST' })
      .then(() => {
        window.location.href = '/login.html';
      })
      .catch(error => {
        console.error('Error al cerrar sesión:', error);
      });
  }
  
  // Establecer fecha mínima como hoy
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('fecha_inicio').min = today;
  document.getElementById('fecha_fin').min = today;
  
  // Validar que fecha fin sea después de fecha inicio
  document.getElementById('fecha_inicio').addEventListener('change', function() {
    const fechaInicio = this.value;
    const fechaFinInput = document.getElementById('fecha_fin');
    fechaFinInput.min = fechaInicio;
    
    if (fechaFinInput.value && fechaFinInput.value <= fechaInicio) {
      fechaFinInput.value = '';
    }
  });
  
  // Limpiar formulario
  document.getElementById('btn-limpiar').addEventListener('click', function() {
    document.getElementById('form-disponibilidad').reset();
    document.getElementById('resultado').innerHTML = '';
    document.getElementById('fecha_inicio').min = today;
    document.getElementById('fecha_fin').min = today;
  });
</script>

<!-- Cargar el script de consultar después de que el DOM esté listo -->
<script src="./js/consultar.js"></script>
</body>
</html>